<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://gcore.jsdelivr.net">
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="//unpkg.com">

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>【权限与会话】由appinfo谈谈UAC级别.md - oone</title>

  
    <meta name="description" content="概述：学习 appinfo 的时候看到了相关的设定，由此记录以及说明一下 ConsentPromptBehaviorAdmin 和 ConsentPromptBehaviorUser 两个字段。 相关阅读：  如何让Windows 10的UAC更懂你？ - 知乎   0x01 前言学习 UAC 避免不了 appinfo、consent、RPC 这三个关键点。当然，整个 UAC 的流程也不能只有这">
<meta property="og:type" content="article">
<meta property="og:title" content="【权限与会话】由appinfo谈谈UAC级别.md">
<meta property="og:url" content="http://example.com/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/index.html">
<meta property="og:site_name" content="oone">
<meta property="og:description" content="概述：学习 appinfo 的时候看到了相关的设定，由此记录以及说明一下 ConsentPromptBehaviorAdmin 和 ConsentPromptBehaviorUser 两个字段。 相关阅读：  如何让Windows 10的UAC更懂你？ - 知乎   0x01 前言学习 UAC 避免不了 appinfo、consent、RPC 这三个关键点。当然，整个 UAC 的流程也不能只有这">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/image-20231201152010027.png">
<meta property="og:image" content="http://example.com/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/image-20231201152958819.png">
<meta property="article:published_time" content="2023-11-30T16:00:00.000Z">
<meta property="article:modified_time" content="2023-12-06T09:06:50.879Z">
<meta property="article:author" content="mingming">
<meta property="article:tag" content="权限与会话">
<meta property="article:tag" content="UAC">
<meta property="article:tag" content="appinfo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/%E3%80%90%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D%E3%80%91%E7%94%B1appinfo%E8%B0%88%E8%B0%88UAC%E7%BA%A7%E5%88%AB/image-20231201152010027.png">
  
  
  
  <meta name="keywords" content="权限与会话,UAC,appinfo">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="oone" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="/images/avator.png">
  

  

  


  
</head>

<body>
  




  <div class="l_body" id="start">
    <aside class="l_left" layout="post">
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/images/avator.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">oone</div><div class="sub normal cap">固执无罪，梦想无价</div><div class="sub hover cap" style="opacity:0"> Coding For Knowledge</div></a></div>

<nav class="menu dis-select"><a class="nav-item" href="/readme/">主页</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/more/">更多</a></nav>
</header>


<div class="widgets">
<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/blog/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"/></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">【权限与会话】由appinfo谈谈UAC级别.md</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01-%E5%89%8D%E8%A8%80"><span class="toc-text">0x01 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02-UAC-%E6%8F%90%E6%9D%83%E4%B8%AD%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">0x02 UAC 提权中的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03-ConsentPromptBehavior"><span class="toc-text">0x03 ConsentPromptBehavior</span></a></li></ol></div></div></widget>

<widget class="widget-wrapper recent"><div class="widget-header cap theme dis-select"><span class="name">最近更新</span></div><div class="widget-body related-posts fs14"><a class="item title" href="/A_OS/Windows/RPC/%E3%80%90RPC%E3%80%91ALPC/"><span class="title">【RPC】ALPC 调用详解（翻译|TODO）</span></a><a class="item title" href="/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/Privilege%20constants/"><span class="title">【Windows】权限(Privilege Constants)</span></a><a class="item title" href="/A_OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/%E6%8F%90%E6%9D%83%E5%B7%A5%E5%85%B7/"><span class="title">【Windows】提权工具 psExec.exe</span></a><a class="item title" href="/A_OS/Windows/RPC/%E3%80%90RPC%E3%80%91%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E5%AE%9E%E4%BE%8B%E8%AF%A6%E8%A7%A3/"><span class="title">【RPC】调用过程实例详解</span></a><a class="item title" href="/A_OS/Windows/RPC/%E3%80%90RPC%E3%80%91%E6%BC%8F%E6%B4%9E/"><span class="title">【RPC】漏洞</span></a></div></widget>




</div>


    </aside>
    <div class="l_main">
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/A-OS/">A_OS</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/A-OS/Windows/">Windows</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/A-OS/Windows/%E6%9D%83%E9%99%90%E4%B8%8E%E4%BC%9A%E8%AF%9D/">权限与会话</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-11-30T16:00:00.000Z">2023-12-01</time></div></div>

<article class="md-text content post">
<h1 class="article-title"><span>【权限与会话】由appinfo谈谈UAC级别.md</span></h1>
<blockquote>
<p>概述：学习 appinfo 的时候看到了相关的设定，由此记录以及说明一下 <code>ConsentPromptBehaviorAdmin</code> 和 <code>ConsentPromptBehaviorUser</code> 两个字段。</p>
<p>相关阅读：</p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://zhuanlan.zhihu.com/p/65682899">如何让Windows 10的UAC更懂你？ - 知乎</a></li>
</ul>
</blockquote>
<h2 id="0x01-前言"><a href="#0x01-前言" class="headerlink" title="0x01 前言"></a>0x01 前言</h2><p>学习 UAC 避免不了 appinfo、consent、RPC 这三个关键点。当然，整个 UAC 的流程也不能只有这三点，还涉及到用户会话、安全策略、ACL、DACL、SACL等等概念。都是需要去了解和深入的。而安全策略我们都知道，有比较多的字段策略都是保存在注册表中的。这里就包括 &#x3D;&#x3D;用户账户控制：管理员批准模式中管理员的提升权限提示的行为&#x3D;&#x3D;</p>
<img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="【权限与会话】由appinfo谈谈UAC级别/image-20231201152010027.png" alt="用户账户控制：管理员批准模式中管理员的提升权限提示的行为" style="zoom:50%;">


<h2 id="0x02-UAC-提权中的处理"><a href="#0x02-UAC-提权中的处理" class="headerlink" title="0x02 UAC 提权中的处理"></a>0x02 UAC 提权中的处理</h2><p>从何说起？就是UAC的提权过程中创建 consent 进程的时候。如下图所示，在 <code>AiLaunchConstnUI</code> 函数中，首先根据传入的 <code>CreateFlags</code> 来确定要检查的用户，这里分两种情况，一个管理员用户，一个普通用户。两个字段在注册表中的值所对应的策略和处理是一致的。如下所示，查询的注册表目录为 <code>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System</code></p>
<img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="【权限与会话】由appinfo谈谈UAC级别/image-20231201152958819.png" alt="AiLaunchConesentUI" style="zoom: 80%;">

<p>可以看到 <code>ConsentPromptBehavior</code> 策略值也是 UAC 提权中的一个判断点。接下来就 <code>ConsentPromptBehavior</code> 值描述一下。</p>
<h2 id="0x03-ConsentPromptBehavior"><a href="#0x03-ConsentPromptBehavior" class="headerlink" title="0x03 ConsentPromptBehavior"></a>0x03 ConsentPromptBehavior</h2><p>ConsentPromptBehavior 值对应了五个级别，分别如下表所示：</p>
<p><strong>Data:</strong> This MUST be a value in the following table.</p>
<table>
<thead>
<tr>
<th align="left">Value</th>
<th></th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0x00000000</td>
<td>无提示提升: 允许有权限的帐户执行需要提升权限的操作，而无需同意或凭据。注意: 仅在大多数受限制的环境中使用该选项</td>
<td align="left">This option allows the Consent Admin to perform an operation that requires elevation without consent or credentials.</td>
</tr>
<tr>
<td align="left">0x00000001</td>
<td>当操作需要提升权限时，此选项会提示同意管理员输入其用户名和密码（或其他有效的管理员）。此操作在安全桌面上进行。</td>
<td align="left">This option prompts the Consent Admin to enter his or her user name and password (or another valid admin) when an operation requires elevation of privilege. This operation occurs on the secure desktop.</td>
</tr>
<tr>
<td align="left">0x00000002</td>
<td>此选项提示管理员在 “管理员审批模式 “下选择 “允许 “或 “拒绝 “需要提升权限的操作。如果同意管理员选择 “允许”，操作将以可用的最高权限继续进行。”提示同意 “消除了要求用户输入姓名和密码才能执行权限任务的不便。此操作在安全桌面上进行。</td>
<td align="left">This option prompts the administrator in Admin Approval Mode to select either “Permit” or “Deny” an operation that requires elevation of privilege. If the Consent Admin selects Permit, the operation will continue with the highest available privilege. “Prompt for consent” removes the inconvenience of requiring that users enter their name and password to perform a privileged task. This operation occurs on the secure desktop.</td>
</tr>
<tr>
<td align="left">0x00000003</td>
<td>当操作需要提升权限时，该选项会提示同意管理员输入其用户名和密码（或其他有效管理员的用户名和密码）。</td>
<td align="left">This option prompts the Consent Admin to enter his or her user name and password (or that of another valid admin) when an operation requires elevation of privilege.</td>
</tr>
<tr>
<td align="left">0x00000004</td>
<td>此选项提示管理员在 “管理员审批模式 “下选择 “允许 “或 “拒绝 “需要提升权限的操作。如果同意管理员选择 “允许”，操作将以可用的最高权限继续进行。”提示同意 “消除了要求用户输入姓名和密码才能执行权限任务的不便。</td>
<td align="left">This prompts the administrator in Admin Approval Mode to select either “Permit” or “Deny” an operation that requires elevation of privilege. If the Consent Admin selects Permit, the operation will continue with the highest available privilege. “Prompt for consent” removes the inconvenience of requiring that users enter their name and password to perform a privileged task.</td>
</tr>
<tr>
<td align="left">0x00000005</td>
<td>该选项为默认值。它用于在管理员审批模式下提示管理员选择 “允许 “或 “拒绝 “对任何非 Windows 二进制文件进行需要提升权限的操作。如果同意管理员选择 “允许”，操作将以最高可用权限继续进行。此操作将在安全桌面上进行。</td>
<td align="left">This option is the default. It is used to prompt the administrator in Admin Approval Mode to select either “Permit” or “Deny” for an operation that requires elevation of privilege for any non-Windows binaries. If the Consent Admin selects Permit, the operation will continue with the highest available privilege. This operation will happen on the secure desktop.<a target="_blank" rel="external nofollow noopener noreferrer" href="https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-gpsb/3b1bb402-c56d-4dde-b2fd-880d464d9125#Appendix_A_8">&lt;8&gt;</a></td>
</tr>
</tbody></table>
<p>其中，0x0 所代表的限制最小，0x5 是默认级别。</p>



<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/C_OpenSource/sha1/">【OpenSource】 SHA1 in C++</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/B_Code/%E6%B1%87%E7%BC%96/%E3%80%90%E6%B1%87%E7%BC%96%E3%80%91%E8%8E%B7%E5%8F%96%E8%BF%9B%E7%A8%8B%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF/">【汇编】获取进程系统信息</a></div></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="\A_OS\Windows\权限与会话\【权限与会话】SDDL\" title="【权限与会话】SDDL（翻译）"><span class="title">【权限与会话】SDDL（翻译）</span></a><a class="item" href="\A_OS\Windows\权限与会话\Privilege constants\" title="【Windows】权限(Privilege Constants)"><span class="title">【Windows】权限(Privilege Constants)</span><span class="excerpt">
windows 提权时常用的 Constants
微软官方文档：Privilege Constants (Winnt.h) - Win32 apps | Microsoft Learn
</span></a></div></section></div>





      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class="float-panel mobile-only blur" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"/><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"codeblock":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
